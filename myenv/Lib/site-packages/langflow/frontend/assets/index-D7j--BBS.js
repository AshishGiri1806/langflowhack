import{r as p,h as I,j as e,aF as F,aw as T,cH as D,aj as y,u as R,B as u,aE as _,ek as M,aD as L,el as $,I as j,em as B,en as H,eo as O}from"./index-e8QJh9aC.js";import{I as S}from"./input-CR-TkjST.js";import{L as E}from"./label-DasAbf65.js";import{C as U}from"./checkbox-C_SFShR-.js";const V=({name:d,invalidNameList:c=[],description:l,endpointName:r,maxLength:n=50,setName:t,setDescription:a,setEndpointName:o})=>{const[h,i]=p.useState(!1),[x,w]=p.useState(!0),[N,m]=p.useState(!1);I(s=>s.currentFlow);const b=s=>{const{value:f}=s.target;f.length>=n?i(!0):i(!1);let C=!1;for(let v=0;v<c.length;v++){if(f===c[v]){C=!0;break}C=!1}m(C),t(f)},k=s=>{a(s.target.value)},A=s=>{const f=D(s.target.value,n);w(f),o(s.target.value)},g=s=>s.target.select();return e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"edit-flow-arrangement",children:[e.jsxs("span",{className:"font-medium",children:["Name",t?"":":"]})," ",h&&e.jsx("span",{className:"edit-flow-span",children:"Character limit reached"}),N&&e.jsx("span",{className:"edit-flow-span",children:"Invalid name"})]}),t?e.jsx(S,{className:"nopan nodelete nodrag noflow mt-2 font-normal",onChange:b,type:"text",name:"name",value:d??"",placeholder:"Flow name",id:"name",maxLength:n,onDoubleClickCapture:s=>{g(s)}}):e.jsx("span",{className:"font-normal text-muted-foreground word-break-break-word",children:d})]}),e.jsxs(E,{children:[e.jsx("div",{className:"edit-flow-arrangement mt-3",children:e.jsxs("span",{className:"font-medium",children:["Description",a?" (optional)":":"]})}),a?e.jsx(F,{name:"description",id:"description",onChange:k,value:l,placeholder:"Flow description",className:"mt-2 max-h-[250px] resize-none font-normal",rows:5,onDoubleClickCapture:s=>{g(s)}}):e.jsx("div",{className:T("max-h-[250px] overflow-auto font-normal text-muted-foreground word-break-break-word",l===""?"font-light italic":""),children:l===""?"No description":l})]}),o&&e.jsxs(E,{children:[e.jsxs("div",{className:"edit-flow-arrangement mt-3",children:[e.jsx("span",{className:"font-medium",children:"Endpoint Name"}),!x&&e.jsxs("span",{className:"edit-flow-span",children:["Invalid endpoint name. Use only letters, numbers, hyphens, and underscores (",n," characters max)."]})]}),e.jsx(S,{className:"nopan nodelete nodrag noflow mt-2 font-normal",onChange:A,type:"text",name:"endpoint_name",value:r??"",placeholder:"An alternative name to run the endpoint",maxLength:n,id:"endpoint_name",onDoubleClickCapture:s=>{g(s)}})]})]})},z=V,G=p.forwardRef((d,c)=>{const l=y(m=>m.version),r=R(m=>m.setNoticeData),[n,t]=p.useState(!1),a=I(m=>m.currentFlow);p.useEffect(()=>{h(a.name),x(a.description)},[a.name,a.description]);const[o,h]=p.useState(a.name),[i,x]=p.useState(a.description),[w,N]=p.useState(!1);return e.jsxs(u,{size:"smaller-h-full",open:w,setOpen:N,onSubmit:()=>{n?(_({id:a.id,data:a.data,description:i,name:o,last_tested_version:l,endpoint_name:a.endpoint_name,is_component:!1},o,i),r({title:M})):_(L({id:a.id,data:a.data,description:i,name:o,last_tested_version:l,endpoint_name:a.endpoint_name,is_component:!1}),o,i),N(!1)},children:[e.jsx(u.Trigger,{asChild:!0,children:d.children}),e.jsxs(u.Header,{description:$,children:[e.jsx("span",{className:"pr-2",children:"Export"}),e.jsx(j,{name:"Download",className:"h-6 w-6 pl-1 text-foreground","aria-hidden":"true"})]}),e.jsxs(u.Content,{children:[e.jsx(z,{name:o,description:i,setName:h,setDescription:x}),e.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[e.jsx(U,{id:"terms",checked:n,onCheckedChange:m=>{t(m)}}),e.jsx("label",{htmlFor:"terms",className:"export-modal-save-api text-sm",children:B})]}),e.jsx("span",{className:"mt-1 text-xs text-destructive",children:H})]}),e.jsx(u.Footer,{submit:{label:"Export"}})]})}),Q=G;function K({isMac:d,hasShift:c,filteredShortcut:l,shortcutWPlus:r}){return c?e.jsxs("span",{className:"flex items-center justify-center gap-0.5 text-xs",children:[d?e.jsx(j,{name:"Command",className:"h-3 w-3"}):l[0],e.jsx(j,{name:"ArrowBigUp",className:"h-4 w-4"}),l.map((n,t)=>t>0?n.toUpperCase():null)]}):e.jsxs("span",{className:"flex items-center justify-center gap-0.5 text-xs",children:[r[0].toLowerCase()==="space"?"Space":r[0].length<=1?r[0]:d?e.jsx(j,{name:"Command",className:"h-3 w-3"}):e.jsx("span",{className:"flex items-center",children:r[0]}),r.map((n,t)=>t>0?e.jsx("span",{className:"flex items-center",children:n.toUpperCase()},t):null)]})}function W({value:d,icon:c,style:l,dataTestId:r,ping:n,shortcut:t}){let a=!1;const o=t==null?void 0:t.split("+");o.forEach(x=>{x.toLowerCase().includes("shift")&&(a=!0)});const h=o.filter(x=>!x.toLowerCase().includes("shift"));let i=[];return a||(i=h.join("+").split(" ")),e.jsxs("div",{className:`flex ${l}`,"data-testid":r,children:[e.jsx(j,{name:c,className:`mr-2 ${c==="Share3"?"absolute left-2 top-[0.25em] h-6 w-6":"mt-[0.15em] h-4 w-4"} ${n&&"animate-pulse text-green-500"}`}),e.jsx("span",{className:`${c==="Share3"?"ml-[1.8em]":" "}`,children:d}),e.jsx("span",{className:"absolute right-2 top-[0.43em] flex items-center rounded-sm bg-muted px-1.5 py-[0.1em] text-muted-foreground",children:e.jsx(K,{isMac:O,hasShift:a,filteredShortcut:h,shortcutWPlus:i})})]})}export{Q as E,K as R,W as T,z as a};
